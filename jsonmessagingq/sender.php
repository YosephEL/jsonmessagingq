<?php/* * this demo version program can able to receive the message from the rabbitmq messaging queue * and store into a mysql database */// include the libraryrequire_once __DIR__ . '/../../../vendor/autoload.php';use PhpAmqpLib\Connection\AMQPStreamConnection;use PhpAmqpLib\Message\AMQPMessage;//create a connection to the server$connection = new AMQPStreamConnection('localhost', 5672, 'guest', 'guest');$channel = $connection->channel();//Create a message to the task_queue:$channel->queue_declare('task_queue', false, true, false, false);//json format message//$json_data = '{"infogebana_togo": {"pr_producer": [{"PK_pr_producer": "AB_00478","FK_pr_regions": "5191","firstname": "oliver","lastname": "huber","family_members": 2,"lng": "8째 32\" 12\" E","lat": "47째 22\" 54\" N","adress": "Feldstrasse 25","phone_number": "079 123 45 67","location": "zurich","statement": "hi"}]}}';//json format messaging$json_data = '{"PK_pr_producer": "AB_00012","FK_pr_regions": 0,"firstname": "oliver","lastname": "huber","family_members": 2,"lng": "8째 32\" 12\" E","lat": "47째 22\" 54\" N","adress": "Feldstrasse 25","phone_number": "079 123 45 67","location": "zurich","statement": "hi"}'; if(empty($data)) $data = $json_data;$msg = new AMQPMessage($data,    array('delivery_mode' => AMQPMessage::DELIVERY_MODE_PERSISTENT));$channel->basic_publish($msg, '', 'task_queue');echo "<pre>";print ($data);echo "</pre>";//we close the channel and the connection$channel->close();$connection->close();